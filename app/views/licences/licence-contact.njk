{% extends 'layout.njk' %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}

{% block breadcrumbs %}
  {{ govukBackLink({
    text: 'Back to summary',
    href: '/licences/' + licenceId + '/summary'
  }) }}
{% endblock %}

{% block content %}

  <h1 class="govuk-heading-l">Licence number: {{ customerId }}</h1>

  {% from "govuk/components/table/macro.njk" import govukTable %}

  {% macro displayAddress(address) %}
    {% if address.addressLine1 %}
      <p class="govuk-body govuk-!-margin-bottom-0">{{ address.addressLine1 }}</p>
    {% endif %}
    {% if address.addressLine2 %}
      <p class="govuk-body govuk-!-margin-bottom-0">{{ address.addressLine2 }}</p>
    {% endif %}
    {% if address.addressLine3 %}
      <p class="govuk-body govuk-!-margin-bottom-0">{{ address.addressLine3 }}</p>
    {% endif %}
    {% if address.addressLine4 %}
      <p class="govuk-body govuk-!-margin-bottom-0">{{ address.addressLine4 }}</p>
    {% endif %}
    {% if address.town %}
      <p class="govuk-body govuk-!-margin-bottom-0">{{ address.town }}</p>
    {% endif %}
    {% if address.county %}
      <p class="govuk-body govuk-!-margin-bottom-0">{{ address.county }}</p>
    {% endif %}
    {% if address.postcode %}
      <p class="govuk-body govuk-!-margin-bottom-0">{{ address.postcode }}</p>
    {% endif %}
    {{ address.country }}
  {% endmacro %}

  {% for licenceContact in licenceContacts %}
    {# Set an easier to use index. Also means we can refer to it inside our elementDetail loop #}

    {{ govukSummaryList({
      card: {
        title: {
          text: licenceContact.role
        }
      },
      rows: [{
        key: {
          text: "Name",
          classes:"govuk-!-font-weight-regular"
        },
        value: {
          text:  licenceContact.name
        }
      },
      {
        key: {
          text: "Address",
          classes:"govuk-!-font-weight-regular"
        },
        value: {
          html: displayAddress(licenceContact.address)
        }
      }
      ]
}) }}

  {% endfor %}

{% endblock %}
