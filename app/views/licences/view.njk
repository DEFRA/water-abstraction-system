{% extends 'layout.njk' %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}

{% block breadcrumbs %}
    {{ govukBackLink({
        text: 'Go back to search',
        href: "/licences"
    }) }}
{% endblock %}

{% block content %}
    {% if warning %}
        {{ govukWarningText({
            text: warning,
            iconFallbackText: "Warning"
        }) }}
    {% endif %}

    {% if notification %}
        {% if notification %}
            {{ govukNotificationBanner({
                html: '<strong>' + notification + '</strong>'
            }) }}
        {% endif %}
    {% endif %}

    <span class="govuk-caption-l">{{ licenceName }}</span>
    <h1 class="govuk-heading-l">Licence number {{ licenceRef }}</h1>

    {% if registeredTo %}
        <p>Registered to <a href="/user/{{ primaryUser.userId }}/status">{{ registeredTo }}</a></p>
    {% endif %}

    <div class="govuk-tabs">
        <h2 class="govuk-tabs__title">
            Contents
        </h2>
        <ul class="govuk-tabs__list">
            <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
                <a class="govuk-tabs__tab" href="{{ path }}/summary">
                    Summary
                </a>
            </li>
            <li class="govuk-tabs__list-item">
                <a class="govuk-tabs__tab" href="{{ path }}/contact-details">
                    Contact details
                </a>
            </li>
            <li class="govuk-tabs__list-item">
                <a class="govuk-tabs__tab" href="{{ path }}/returns">
                    Returns
                </a>
            </li>
            <li class="govuk-tabs__list-item">
                <a class="govuk-tabs__tab" href="{{ path }}/communications">
                    Communications
                </a>
            </li>
            <li class="govuk-tabs__list-item">
                <a class="govuk-tabs__tab" href="{{ path }}/bills">
                    Bills
                </a>
            </li>
            <li class="govuk-tabs__list-item">
                <a class="govuk-tabs__tab" href="{{ path }}/charge-information">
                    Charge information
                </a>
            </li>
        </ul>

        <div class="govuk-tabs__panel" id="{{ activeTab }}">
            {% if activeTab === 'summary' %}
                {% include "licences/tabs/summary.njk" %}
            {% endif %}
        </div>
    </div>


{#    }, {#}
{#    label: "Bills",#}
{#    id: "bills",#}
{#    panel: {#}
{#    html: billsTabHtml#}
{#    }#}
{#    } if roles and 'billing' in roles, {#}
{#    label: "Charge information",#}
{#    id: "charge-information",#}
{#    panel: {#}
{#    html: chargeInformationTabHtml#}
{#    }#}
{#    } if roles and 'view_charge_versions' in roles#}
{% endblock %}
