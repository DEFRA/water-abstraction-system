{% extends 'layout.njk' %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}
{% from "govuk/components/tabs/macro.njk" import govukTabs %}
{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}

{% block breadcrumbs %}
  {{
    govukBackLink({
      text: 'Go back to search',
      href: "/licences"
    })
  }}
{% endblock %}

{#{% set summaryTabHtml %}#}
{#  {% include "licences/tabs/summary.njk" %}#}
{#{% endset %}#}

{#{% set contactDetailsTabHtml %}#}
{#{% endset %}#}

{#{% set returnsTabHtml %}#}
{#{% endset %}#}

{#{% set communicationsTabHtml %}#}
{#{% endset %}#}

{#{% set billsTabHtml %}#}
{#{% endset %}#}

{#{% set chargeInformationTabHtml %}#}
{#{% endset %}#}

{% block content %}
  {% if warning %}
    {{ govukWarningText({
      text: warning,
      iconFallbackText: "Warning"
    }) }}
  {% endif %}

  {% if notification %}
    {% if notification %}
      {{ govukNotificationBanner({
        html: '<strong>' + notification + '</strong>'
      }) }}
    {% endif %}
  {% endif %}

  <span class="govuk-caption-l">{{ licenceName }}</span>
  <h1 class="govuk-heading-l">Licence number {{ licenceRef }}</h1>

  {% if registeredTo %}
    <p>Registered to <a href="/user/{{primaryUser.userId}}/status">{{ registeredTo }}</a></p>
  {% endif %}

  <div class="govuk-tabs">
    <h2 class="govuk-tabs__title">
      Contents
    </h2>
    <ul class="govuk-tabs__list">
      {% for tab in tabs %}
        <li class="govuk-tabs__list-item {% if tab.active === true %} govuk-tabs__list-item--selected {% endif %}">
          <a class="govuk-tabs__tab" href="{{ tab.href }}">
            {{ tab.name }}
          </a>
        </li>
      {% endfor %}
    </ul>

    <div class="govuk-tabs__panel" id="{{ activeTab }}">
      {% if activeTab === 'summary' %}
        {% include "licences/tabs/summary.njk" %}
      {% endif %}
    </div>
  </div>



  {#        <li class="govuk-tabs__list-item govuk-tabs__list-item--selected"> #}
  {#            <a class="govuk-tabs__tab" href="summary"> #}
  {#                Summary #}
  {#            </a> #}
  {#        </li> #}
  {#        <li class="govuk-tabs__list-item"> #}
  {#            <a class="govuk-tabs__tab" href="contact-details"> #}
  {#                Contact details #}
  {#            </a> #}
  {#        </li> #}
  {#        <li class="govuk-tabs__list-item"> #}
  {#            <a class="govuk-tabs__tab" href="returns"> #}
  {#                Returns #}
  {#            </a> #}
  {#        </li> #}
  {#        <li class="govuk-tabs__list-item"> #}
  {#            <a class="govuk-tabs__tab" href="communications"> #}
  {#                Communications #}
  {#            </a> #}
  {#        </li> #}
  {#        <li class="govuk-tabs__list-item"> #}
  {#            <a class="govuk-tabs__tab" href="bills"> #}
  {#                Bills #}
  {#            </a> #}
  {#        </li> #}
  {#        <li class="govuk-tabs__list-item"> #}
  {#            <a class="govuk-tabs__tab" href="charge-information"> #}
  {#                Charge information #}
  {#            </a> #}
  {#        </li> #}

  {#  {{ govukTabs({#}
{#    items: [#}
{#      {#}
{#        label: "Summary",#}
{#        id: "summary",#}
{#        panel: {#}
{#          html: summaryTabHtml#}
{#        }#}
{#      }, {#}
{#        label: "Contact details",#}
{#        id: "contact-details",#}
{#        panel: {#}
{#          html: contactDetailsTabHtml#}
{#        }#}
{#      }, {#}
{#        label: "Returns",#}
{#        id: "returns",#}
{#        panel: {#}
{#          html: returnsTabHtml#}
{#        }#}
{#      }, {#}
{#        label: "Communications",#}
{#        id: "communications",#}
{#        panel: {#}
{#          html: communicationsTabHtml#}
{#        }#}
{#      }, {#}
{#        label: "Bills",#}
{#        id: "bills",#}
{#        panel: {#}
{#          html: billsTabHtml#}
{#        }#}
{#      }, {#}
{#        label: "Charge information",#}
{#        id: "charge-information",#}
{#        panel: {#}
{#          html: chargeInformationTabHtml#}
{#        }#}
{#      }#}
{#    ]#}
{#  }) }}#}
{% endblock %}
