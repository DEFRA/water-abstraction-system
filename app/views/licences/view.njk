{% extends 'layout.njk' %}

{% if notification %}
  {% set notification = {
    html: '<strong>' + notification + '</strong>'
  } %}
{% endif %}

{% block pageContent %}
  <style>
    /* =========================================
       GOV.UK-style vertical sub-navigation
       Based on x-govuk-sub-navigation
       ========================================= */

    .x-govuk-sub-navigation {
      margin-bottom: 2rem;
    }

    .x-govuk-sub-navigation__section {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .x-govuk-sub-navigation__section-item {
      border-left: 4px solid transparent;
      margin-bottom: 0.5rem;
      padding-left: 0.75rem;
    }

    .x-govuk-sub-navigation__section-item a {
      display: block;
      text-decoration: none;
      color: #1d70b8; /* GOV.UK blue */
      font-size: 16px;
      line-height: 1.25;
      padding: 0.25rem 0;
    }

    .x-govuk-sub-navigation__section-item a:hover {
      text-decoration: underline;
    }

    .x-govuk-sub-navigation__section-item a:focus {
      outline: 3px solid #ffdd00; /* GOV.UK yellow */
      outline-offset: 0;
      background-color: #ffdd00;
      color: #0b0c0c;
    }

    .x-govuk-sub-navigation__section-item--current {
      border-left-color: #1d70b8;
    }

    .x-govuk-sub-navigation__section-item--current a {
      font-weight: bold;
      color: #0b0c0c;
      text-decoration: none;
    }
  </style>

  {% if (workflowWarning === true) and (('billing' in roles) or ('view_charge_versions' in roles)) %}
    {{ govukWarningText({
      text: "This licence has changed and needs the set up reviewed before it can be billed.",
      iconFallbackText: "Warning"
    }) }}
  {% endif %}

  {{ pageHeadingHtml }}

  {% if primaryUser %}
    <p>Registered to <a href="/user/{{ primaryUser.id }}/status">{{ primaryUser.username }}</a></p>
  {% endif %}

  <div class="govuk-grid-row govuk-!-margin-top-6">
    <!-- Side navigation -->
    <div class="govuk-grid-column-one-quarter">
      {% include "licences/navbar.njk" %}
    </div>

    <!-- Main content area -->
    <div class="govuk-grid-column-three-quarters">
      {% if activeTab === 'summary' %}
        {% include "licences/tabs/summary.njk" %}
      {% endif %}
      {% if activeTab === 'contact-details' %}
        {% include "licences/tabs/contact-details.njk" %}
      {% endif %}
      {% if activeTab === 'returns' %}
        {% include "licences/tabs/returns.njk" %}
      {% endif %}
      {% if activeTab === 'communications' %}
        {% include "licences/tabs/communications.njk" %}
      {% endif %}
      {% if activeTab === 'bills' %}
        {% include "licences/tabs/bills.njk" %}
      {% endif %}
      {% if activeTab === 'set-up' %}
        {% include "licences/tabs/set-up.njk" %}
      {% endif %}
    </div>
  </div>
{% endblock %}
