{% extends 'layout.njk' %}

{% from "govuk/components/details/macro.njk" import govukDetails %}
{% from "govuk/components/pagination/macro.njk" import govukPagination %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}


{% from "macros/conditions-summary-cards.njk" import conditionsSummaryCards %}
{% from "macros/licence-version-change-type-tag.njk" import changeTypeTag as licenceVersionChangeTypeTag %}
{% from "macros/points-summary-cards.njk" import pointsSummaryCards %}
{% from "macros/purposes-summary-cards.njk" import purposesSummaryCards %}

{% block pageContent %}

  {{ licenceVersionChangeTypeTag(changeType, false) }}

  <hr class="govuk-section-break govuk-!-margin-bottom-5 govuk-section-break">

  {% if reason %}
    <p class="govuk-body-l"> {{ reason }} </p>
  {% endif %}

  {% if notes %}
    <p><strong>Notes:</strong> {{ notes }} </p>
  {% endif %}

  {% if errorInDataEmail %}
    <p class="govuk-body">If you find errors in this data, email:
      <a class="gov-link" href="mailto:{{ errorInDataEmail }}">{{ errorInDataEmail }}</a>
    </p>
  {% endif %}

  {% if pagination %}
    {{ govukPagination(pagination) }}
  {% endif %}

  <ul class="govuk-list govuk-!-margin-bottom-6">
    <li>
      <a class="govuk-link" href="#licence-details">Licence details</a>
    </li>
    <li>
      <a class="govuk-link" href="#points">Points</a>
    </li>
    <li>
      <a class="govuk-link" href="#purposes-periods-and-amounts">Purposes, periods and amounts</a>
    </li>
    <li>
      <a class="govuk-link" href="#conditions">Conditions</a>
    </li>
  </ul>

  <section id="licence-details">
    <h2 class="govuk-heading-m govuk-!-margin-top-3">
      Licence details
    </h2>

    {{ govukSummaryList({
      card: {},
      rows: [
        {
          key: {
          text: "Licence version start date"
        },
          value: {
          text: licenceDetails.startDate
        }
        },
        {
          key: {
          text: "Licence version issue date"
        },
          value: {
          text: licenceDetails.issueDate
        }
        },
        {
          key: {
          text: "Application number"
        },
          value: {
          text: licenceDetails.applicationNumber
        }
        },
        {
          key: {
          text: "Licence version end date"
        },
          value: {
          text: licenceDetails.endDate
        }
        }
      ]
    }) }}
  </section>

  <section id="points">
    <h2 class="govuk-heading-m govuk-!-margin-top-3">
      Points
    </h2>

    {{ pointsSummaryCards(points) }}
  </section>

  <section id="purposes-periods-and-amounts">
    <h2 class="govuk-heading-m govuk-!-margin-top-3">
      Purposes, periods and amounts
    </h2>

    {{ purposesSummaryCards(purposes) }}
  </section>

  <section id="conditions">
    <h2 class="govuk-heading-m govuk-!-margin-top-3">
      Conditions
    </h2>

    {{ conditionsSummaryCards(conditionTypes, 'No conditions for this licence version.') }}
  </section>

{% endblock %}
